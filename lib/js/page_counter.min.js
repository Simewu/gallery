let pageName,siteData={};async function fetchCounterStats(e){try{const t="https://simewu-simple-",a="count.simewu.repl.co/",o=await fetch(`${t}${a}${e}.json`);siteData=await o.json()}catch(e){console.error("Error fetching counter:",e),document.getElementById("counter").style.display="none"}}function setupModalListener(e){var t=document.getElementById("visitorModal");t&&t.addEventListener("show.bs.modal",(function(){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback((()=>drawChart(e.total,e.daily,document.getElementById("modalPageName").textContent)))}))}function drawChart(e,t,a){var o=new google.visualization.DataTable;o.addColumn("string","Day"),o.addColumn("number","Visitors");let n=[];t.forEach(((e,a)=>{let o=new Date;o.setDate(o.getDate()-(t.length-1-a)),n.push({date:o,count:e})})),n.sort(((e,t)=>e.date-t.date));let l=n.findIndex((e=>e.count>0)),r=n.slice(l).map((e=>[e.date.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),e.count]));o.addRows(r);var d={width:800,height:400,lineWidth:5,colors:[textColorDim],hAxis:{titleTextStyle:{color:textColor},textStyle:{color:textColorDim},slantedText:!0,slantedTextAngle:45},vAxis:{title:"Number of Visitors",titleTextStyle:{color:textColor},textStyle:{color:textColorDim}},backgroundColor:bgColor,legend:"none"};new google.visualization.LineChart(document.getElementById("visitorGraphModal")).draw(o,d),document.getElementById("totalCount").innerHTML=`Total number of visitors for ${a}: <span class='text-color'>${e}</span>`;let i=t.reduce(((e,t)=>e+t),0);i==e?document.getElementById("yearlyCount").display="none":document.getElementById("yearlyCount").innerHTML=`Number of visitors in the past 365 Days: <span class='text-color'>${i}</span>`}function stats(){if(void 0===siteData.total)return!1;let e=document.createElement("script");e.type="text/javascript",e.src="https://www.gstatic.com/charts/loader.js";try{scriptTag.insertAdjacentElement("afterend",e)}catch(e){}if(null!==document.getElementById("counter"))return document.getElementById("counter").textContent=siteData.total,document.getElementById("modalPageName").addEventListener("click",(()=>{window.location.replace(siteData.page)})),!0;var t=document.createElement("div");t.className="col-auto";var a=document.createElement("span");a.id="counter",a.className="badge badge-pill float-right text-color-dim",a.setAttribute("data-bs-toggle","modal"),a.setAttribute("data-bs-target","#visitorModal"),t.appendChild(a);var o=document.querySelector("footer");if(null===o)return document.getElementById("counter").display="none",!1;var n=o.querySelector(".row");n&&n.appendChild(t);var l=document.createElement("div");l.className="modal fade",l.id="visitorModal",l.setAttribute("aria-labelledby","visitorModalLabel"),l.setAttribute("aria-hidden","true");var r=document.createElement("div");r.className="modal-dialog modal-lg",l.appendChild(r);var d=document.createElement("div");d.className="modal-content bg-color-dimmer modal-lg",r.appendChild(d);var i=document.createElement("div");i.className="modal-header",d.appendChild(i);var c=document.createElement("h5");c.className="modal-title",c.id="visitorModalLabel",c.innerHTML='Counter for <b><span id="modalPageName" class="text-color"></span></b>',i.appendChild(c);var s=document.createElement("button");s.type="button",s.className="btn-close bg-color-inv",s.setAttribute("data-bs-dismiss","modal"),s.setAttribute("aria-label","Close"),i.appendChild(s);var m=document.createElement("div");m.className="modal-body p-2",d.appendChild(m);var u=document.createElement("div");u.id="totalCount",m.appendChild(u);var p=document.createElement("div");p.id="visitorGraphModal",m.appendChild(p);var g=document.createElement("div");return g.id="yearlyCount",m.appendChild(g),o.appendChild(l),document.getElementById("counter").textContent=siteData.total,document.getElementById("modalPageName").textContent=pageName.charAt(0).toUpperCase()+pageName.slice(1),setupModalListener(siteData),!0}function counterInit(){try{let t=document.querySelector('script[src="script.min.js"]'),a=document.createElement("script");function e(){dataLayer.push(arguments)}a.type="text/javascript",a.src="https://www.googletagmanager.com/gtag/js?id=G-LGHB6S47PK",a.async=!0,a.onerror=e=>{},t.insertAdjacentElement("afterend",a),window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-LGHB6S47PK")}catch(o){}pageName=location.href.split("/")[location.href.split("/").length-1].toLowerCase(),""===pageName&&(pageName="index");["index","projects","publications","gallery","resume","contact","submitted","404"].includes(pageName)&&fetchCounterStats(pageName)}setTimeout(counterInit,10);