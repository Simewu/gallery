let pageName,siteData={};async function fetchCounterStats(e){try{const t="https://simewu-simple-",a="count.simewu.repl.co/",o=await fetch(`${t}${a}${e}.json`);siteData=await o.json()}catch(e){console.error("Error fetching counter:",e),document.getElementById("counter").style.display="none"}}function setupModalListener(e){var t=document.getElementById("visitorModal");t&&t.addEventListener("show.bs.modal",(function(){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback((()=>drawChart(e.total,e.daily,document.getElementById("modalPageName").textContent)))}))}function drawChart(e,t,a){var o=new google.visualization.DataTable;o.addColumn("string","Day"),o.addColumn("number","Visitors");let n=[];t.forEach(((e,a)=>{let o=new Date;o.setDate(o.getDate()-(t.length-1-a)),n.push({date:o,count:e})})),n.sort(((e,t)=>e.date-t.date));let l=n.findIndex((e=>e.count>0)),r=n.slice(l).map((e=>[e.date.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),e.count]));o.addRows(r);var d={width:800,height:400,lineWidth:5,colors:[textColorDim],hAxis:{titleTextStyle:{color:textColor},textStyle:{color:textColorDim},slantedText:!0,slantedTextAngle:45},vAxis:{title:"Number of Visitors",titleTextStyle:{color:textColor},textStyle:{color:textColorDim}},backgroundColor:bgColor,legend:"none"};new google.visualization.LineChart(document.getElementById("visitorGraphModal")).draw(o,d),document.getElementById("totalCount").innerHTML=`Total number of visitors for ${a}: <span class='text-color'>${e}</span>`;let i=t.reduce(((e,t)=>e+t),0);i==e?document.getElementById("yearlyCount").display="none":document.getElementById("yearlyCount").innerHTML=`Number of visitors in the past 365 Days: <span class='text-color'>${i}</span>`}function stats(){if(void 0===siteData.total)return!1;if(makeScriptTag(scriptTag,"https://www.gstatic.com/charts/loader.js",!1),null!==document.getElementById("counter"))return document.getElementById("counter").textContent=siteData.total,document.getElementById("modalPageName").addEventListener("click",(()=>{window.location.replace(siteData.page)})),!0;var e=document.createElement("div");e.className="col-auto";var t=document.createElement("span");t.id="counter",t.className="badge badge-pill float-right text-color-dim",t.setAttribute("data-bs-toggle","modal"),t.setAttribute("data-bs-target","#visitorModal"),e.appendChild(t);var a=document.querySelector("footer");if(null===a)return document.getElementById("counter").display="none",!1;var o=a.querySelector(".row");o&&o.appendChild(e);var n=document.createElement("div");n.className="modal fade",n.id="visitorModal",n.setAttribute("aria-labelledby","visitorModalLabel"),n.setAttribute("aria-hidden","true");var l=document.createElement("div");l.className="modal-dialog modal-lg",n.appendChild(l);var r=document.createElement("div");r.className="modal-content bg-color-dimmer modal-lg",l.appendChild(r);var d=document.createElement("div");d.className="modal-header",r.appendChild(d);var i=document.createElement("h5");i.className="modal-title",i.id="visitorModalLabel",i.innerHTML='Counter for <b><span id="modalPageName" class="text-color"></span></b>',d.appendChild(i);var c=document.createElement("button");c.type="button",c.className="btn-close bg-color-inv",c.setAttribute("data-bs-dismiss","modal"),c.setAttribute("aria-label","Close"),d.appendChild(c);var s=document.createElement("div");s.className="modal-body p-2",r.appendChild(s);var m=document.createElement("div");m.id="totalCount",s.appendChild(m);var u=document.createElement("div");u.id="visitorGraphModal",s.appendChild(u);var p=document.createElement("div");return p.id="yearlyCount",s.appendChild(p),a.appendChild(n),document.getElementById("counter").textContent=siteData.total,document.getElementById("modalPageName").textContent=pageName.charAt(0).toUpperCase()+pageName.slice(1),setupModalListener(siteData),!0}function counterInit(){pageName=location.href.split("/")[location.href.split("/").length-1].toLowerCase(),""===pageName&&(pageName="index");["index","projects","publications","gallery","resume","contact","submitted","404"].includes(pageName)&&fetchCounterStats(pageName);try{let t="G-LGHB6S47PK";function e(){dataLayer.push(arguments)}makeScriptTag(scriptTag,"https://www.googletagmanager.com/gtag/js?id="+t,!0,(e=>{})),window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",t)}catch(a){}}counterInit();